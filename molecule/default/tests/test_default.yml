# Molecule managed
---
package:
{{range .Vars.apache2.packages}}
  {{.}}:
    installed: true
{{end}}

service:
  {{.Vars.apache2.service}}:
    enabled: true
    running: true

port:
  tcp:{{.Vars.apache2.ports.http}}:
    listening: true

  tcp:{{.Vars.apache2.ports.https}}:
    listening: true

{{range .Vars.apache2.ports.extra}}
  tcp:{{.}}:
    listening: true
{{end}}

file:
  {{.Vars.apache2.config}}/sites-enabled/000-default.conf:
    exists: true
    filetype: symlink
    contains:
      - :{{.Vars.apache2.ports.http}}

http:
  http://localhost:{{.Vars.apache2.ports.http}}:
    # required attributes
    status: 200
    # optional attributes
    timeout: 1000
    body:
      - Ansible Configured Apache2 server package
